<?php
    
// Define this version number
$BBWEB_NEW_VERSION = 113;

$queries = array();

$queries[] = "SET FOREIGN_KEY_CHECKS=0;";

$queries[] = "TRUNCATE TABLE modules;";

// change milking_rooms fields type
$queries[] = <<<EOF
INSERT INTO `modules` (`module_id`, `module_name`, `module_url`, `parent`, `insert_datetime`, `update_datetime`) VALUES
(1,	'Key Performance Indicators',	'kpi',						0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(2,	'Animal Label Values',			'alv',						0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(3,	'Users',						'users',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(4,	'Roles',						'roles',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(5,	'Modules',						'modules',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(6,	'Settings',						'settings',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(7,	'Milking',						'milking',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(8,	'Utilities',					'utilities',				0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(9,	'Service',						'service',					0,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(10,'Milking Session',				'sessions',					7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(11,'Milking Monitor',				'monitor',					7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(12,'Update Firmware',				'updatefirmware',			8,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(13,'Debug iMiklNET',				'sendcmd',					8,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(14,'Backup Restore',				'backuprestoredb',			9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(15,'Reset Procedures',				'reset_procedures',			9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(16,'Update iFC',					'updatesoftware',			9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(17,'Devices',						'devices',					9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(18,'Display All Logs',				'showlogs',					9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(19,'Networking',					'networking',				6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(20,'Parlour Configurator',			'pconfigurator_callback',	6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(21,'KPI',							'settings/kpi',				6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(22,'Reboot iFC',					'reboot',					6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(23,'General',						'settings/general',			6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(24,'Herd Composition',				'herd_composition',			1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(25,'Lactation',					'lactation',				1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(26,'DIM',							'dim',						1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(27,'Fertility KPIs',				'fertility_kpis',			1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(28,'All Modules',					'modules/allmodule',		5,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(29,'Modules Assign',				'assign',					5,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(30,'All Users',					'users/allusers',			3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(31,'Users Modules',				'users/modules',			3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00');
EOF;

// Only remove predefined Module Assigned.
$queries[] = "DELETE FROM module_assign WHERE user_id IS NULL;";

$queries[] = <<<EOF
INSERT INTO `module_assign` (`id`, `role_id`, `user_id`, `module_id`, `insert_datetime`, `update_datetime`) VALUES
(NULL, 1,	NULL,	1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	1,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	24,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	24,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	24,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	24,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	25,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	25,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	25,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	25,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	26,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	26,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	26,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	26,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	27,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	27,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	27,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	27,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	2,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	2,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	2,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	2,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	30,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	30,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	30,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	31,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	31,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	31,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	4,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	4,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	5,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	28,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	29,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	6,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	19,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	19,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	20,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	20,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	20,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	21,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	21,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	21,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	22,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	22,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	23,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	23,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	7,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	10,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	11,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	11,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 3,	NULL,	11,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	11,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	8,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	8,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	12,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	12,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	13,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	9,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	14,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	14,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	15,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	15,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	16,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 2,	NULL,	16,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	17,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 1,	NULL,	18,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00'),
(NULL, 4,	NULL,	3,	'0000-00-00 00:00:00',	'0000-00-00 00:00:00');
EOF;

$queries[] = "SET FOREIGN_KEY_CHECKS=1;";
